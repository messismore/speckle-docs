<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Grasshopper ‚û° Revit | Speckle Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="/scripts/scroll-to-hash.js"></script>
    <meta name="description" content="Documentation on everything Speckle">
    <meta name="theme-color" content="#0480FB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c47c1881.css" as="style"><link rel="preload" href="/assets/js/app.a90ae7ec.js" as="script"><link rel="preload" href="/assets/js/2.30e32a96.js" as="script"><link rel="preload" href="/assets/js/5.bb6a9546.js" as="script"><link rel="prefetch" href="/assets/js/10.fae5e6d1.js"><link rel="prefetch" href="/assets/js/11.996eea02.js"><link rel="prefetch" href="/assets/js/12.0a5fd7ae.js"><link rel="prefetch" href="/assets/js/13.dddba295.js"><link rel="prefetch" href="/assets/js/14.fab3861f.js"><link rel="prefetch" href="/assets/js/15.4ee5f480.js"><link rel="prefetch" href="/assets/js/16.8fd9a0ef.js"><link rel="prefetch" href="/assets/js/17.3dad7cf7.js"><link rel="prefetch" href="/assets/js/18.7afdb510.js"><link rel="prefetch" href="/assets/js/19.6251e448.js"><link rel="prefetch" href="/assets/js/20.71fb7abb.js"><link rel="prefetch" href="/assets/js/21.df477c4a.js"><link rel="prefetch" href="/assets/js/22.62c70760.js"><link rel="prefetch" href="/assets/js/23.0d6de2f6.js"><link rel="prefetch" href="/assets/js/24.165711aa.js"><link rel="prefetch" href="/assets/js/25.f2834aad.js"><link rel="prefetch" href="/assets/js/26.868f3e17.js"><link rel="prefetch" href="/assets/js/27.1ed49925.js"><link rel="prefetch" href="/assets/js/28.ac560d0d.js"><link rel="prefetch" href="/assets/js/29.0e2b9712.js"><link rel="prefetch" href="/assets/js/3.38209935.js"><link rel="prefetch" href="/assets/js/30.f4ada542.js"><link rel="prefetch" href="/assets/js/31.546af2eb.js"><link rel="prefetch" href="/assets/js/32.a521f6ab.js"><link rel="prefetch" href="/assets/js/33.78efc442.js"><link rel="prefetch" href="/assets/js/34.2999d2c2.js"><link rel="prefetch" href="/assets/js/35.1543f154.js"><link rel="prefetch" href="/assets/js/36.e44add84.js"><link rel="prefetch" href="/assets/js/37.79c8f986.js"><link rel="prefetch" href="/assets/js/38.d3feed7d.js"><link rel="prefetch" href="/assets/js/39.fadaf6da.js"><link rel="prefetch" href="/assets/js/4.34836e0f.js"><link rel="prefetch" href="/assets/js/40.c6f726d1.js"><link rel="prefetch" href="/assets/js/41.a3895286.js"><link rel="prefetch" href="/assets/js/42.876b8808.js"><link rel="prefetch" href="/assets/js/43.89be6dde.js"><link rel="prefetch" href="/assets/js/44.fe4b06f4.js"><link rel="prefetch" href="/assets/js/45.590dbf01.js"><link rel="prefetch" href="/assets/js/46.bba68b22.js"><link rel="prefetch" href="/assets/js/47.ff48fd0b.js"><link rel="prefetch" href="/assets/js/48.b4202064.js"><link rel="prefetch" href="/assets/js/49.083ceacf.js"><link rel="prefetch" href="/assets/js/50.f03dcd13.js"><link rel="prefetch" href="/assets/js/51.b3c49844.js"><link rel="prefetch" href="/assets/js/52.7e5e7d26.js"><link rel="prefetch" href="/assets/js/53.d21b8a35.js"><link rel="prefetch" href="/assets/js/54.698a3867.js"><link rel="prefetch" href="/assets/js/55.e59ae049.js"><link rel="prefetch" href="/assets/js/56.3a948b0d.js"><link rel="prefetch" href="/assets/js/57.25026e30.js"><link rel="prefetch" href="/assets/js/58.8007a9b6.js"><link rel="prefetch" href="/assets/js/59.c90e55f1.js"><link rel="prefetch" href="/assets/js/6.a6ea64af.js"><link rel="prefetch" href="/assets/js/7.1dab787c.js"><link rel="prefetch" href="/assets/js/8.f554cd35.js"><link rel="prefetch" href="/assets/js/9.6d1fd3fd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c47c1881.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo-docs.png" alt="Speckle Docs" class="logo"> <span class="site-name can-hide">Speckle Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join the beta
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join the beta
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quickstart üèÉ‚Äç‚ôÄÔ∏è</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/quickstart.html" class="sidebar-link">Zero to Speckle ASAP</a></li><li><a href="/user/FAQs.html" class="sidebar-link">FAQs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Guide ü§∑</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Welcome!</a></li><li><a href="/user/concepts.html" class="sidebar-link">Core Concepts</a></li><li><a href="/user/concepts-advanced.html" class="sidebar-link">Advanced Concepts</a></li><li><a href="/user/manager.html" class="sidebar-link">Speckle Manager</a></li><li><a href="/user/web.html" class="sidebar-link">Speckle Web App</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Connectors üîå</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/connectors.html" class="sidebar-link">Introduction</a></li><li><a href="/user/ui.html" class="sidebar-link">User Interface</a></li><li><a href="/user/revit.html" class="sidebar-link">Revit</a></li><li><a href="/user/rhino.html" class="sidebar-link">Rhino</a></li><li><a href="/user/autocadcivil.html" class="sidebar-link">AutoCAD &amp; Civil 3D</a></li><li><a href="/user/grasshopper.html" class="sidebar-link">Grasshopper</a></li><li><a href="/user/dynamo.html" class="sidebar-link">Dynamo</a></li><li><a href="/user/unity.html" class="sidebar-link">Unity</a></li><li><a href="/user/unreal.html" class="sidebar-link">Unreal</a></li><li><a href="/user/blender.html" class="sidebar-link">Blender</a></li><li><a href="/user/excel.html" class="sidebar-link">Excel</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorials ‚ö°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/tutorials.html" class="sidebar-link">Introduction</a></li><li><a href="/user/interop-gh-revit.html" aria-current="page" class="active sidebar-link">Grasshopper ‚û° Revit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#sharing-revit-project-data" class="sidebar-link">Sharing Revit project data</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#using-revit-project-data" class="sidebar-link">Using Revit project data</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#sending-geometry-to-revit" class="sidebar-link">Sending geometry to Revit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#controlling-the-directshape-conversion" class="sidebar-link">Controlling the DirectShape conversion</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#generating-floors-and-levels" class="sidebar-link">Generating Floors and Levels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#creating-levels" class="sidebar-link">Creating levels</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#creating-floors" class="sidebar-link">Creating floors</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#creating-beams" class="sidebar-link">Creating beams</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#creating-the-walls" class="sidebar-link">Creating the walls</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#core-walls" class="sidebar-link">Core walls</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#interior-walls" class="sidebar-link">Interior walls</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#categorizing-generic-geometric-objects" class="sidebar-link">Categorizing generic geometric objects</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#organize-the-building-structure" class="sidebar-link">Organize the building structure</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#sending-the-building-structure" class="sidebar-link">Sending the building structure</a></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#create-adaptivefamiliy-instances" class="sidebar-link">Create AdaptiveFamiliy instances</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#using-branches-to-swap-design-alternatives" class="sidebar-link">Using branches to swap design alternatives</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#using-speckle-in-the-family-editor" class="sidebar-link">Using Speckle in the Family Editor</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#populating-family-instances-in-the-model" class="sidebar-link">Populating family instances in the model</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-gh-revit.html#known-issues" class="sidebar-link">Known issues</a></li></ul></li><li><a href="/user/interop-revit-gh.html" class="sidebar-link">Revit to Grasshopper and back</a></li><li><a href="/user/interop-rhino-revit.html" class="sidebar-link">Rhino ‚û° Revit</a></li><li><a href="/user/tutorial-autocad-rhinogh.html" class="sidebar-link">Quality control AutoCAD drawings in Grasshopper</a></li><li><a href="/user/tutorial-unity-revit-rhino-experiences.html" class="sidebar-link">Create interactive real time experiences with Unity, Revit and Rhino</a></li><li><a href="/user/tutorial-collab-rh-gh.html" class="sidebar-link">Collaborative Data Informed Design Workflows With Rhino and Grasshopper</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="grasshopper-‚û°-revit"><a href="#grasshopper-‚û°-revit" class="header-anchor">#</a> Grasshopper ‚û° Revit</h1> <blockquote><p><strong>Level:</strong> intermediate</p> <p><strong>Author:</strong> Alan</p> <p><strong>Software used:</strong> Revit 2021, Grasshopper for Rhino 7</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>We recently did a major upgrade of this guide. If for whatever reason you were looking for the previous version, you can find it <a href="/user/interop-gh-revit-v1.html">here</a></p></div> <p>You can stream <em>Grasshopper</em> native geometry to Revit using Speckle! In this guide, we will send different types of geometry and built elements to Revit to understand how Speckle converts them into native Revit geometries. We will also create some <code>BuiltElements</code> using the <code>SchemaBuilder</code> node, which allows for the generation of native Revit elements such as walls, floors, topography, etc...</p> <p><img src="/assets/img/ghrvt-intro.720cca57.gif" alt=""></p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h2> <p>Before getting started, check that you have a supported version of Rhino (6 or 7) and Revit (2019-21) and the Speckle 2.0 connectors installed for <strong>Grasshopper</strong> and <strong>Revit</strong>. Then download the Rhino and Grasshopper files or this tutorial <a href="https://drive.google.com/drive/folders/1bFRqtdL62bHaA1LAfdzll59FBv0givxE?usp=sharing" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Our Rhino and Grasshopper connectors are independent of each other, unlike in Speckle 1.0. This means you can choose which one is appropriate for you, or install both! üòÅ</p></div> <p>We're also going to assume that you already have access to a Speckle 2.0 server, and you have correctly set up your account for that server in the <em>Speckle Manager</em>.</p> <h2 id="sharing-revit-project-data"><a href="#sharing-revit-project-data" class="header-anchor">#</a> Sharing Revit project data</h2> <p>Let's start with the easy part: In order to create Revit elements using Speckle, we should ideally have some knowledge of the current information available in our Revit project.</p> <p>Let's create a new project using the default <code>Architectural Template</code>. You can use your prefered units. A project will be created with 2 default levels (<em>level 0</em> and <em>level 1</em>). It should also have some default families loaded in the project.</p> <p>Now, go to the <strong>Add-ins</strong> tab, and press the <code>Speckle for Revit</code> icon. The Speckle <em>Desktop UI</em> should appear.</p> <ul><li>Press the blue <code>+</code> button on the lower-right corner to add a stream to the file.</li> <li>Create a new stream by writing a name and clicking on the blue arrow icon. You should see the <code>Stream</code> card appear on the <em>DesktopUI</em> window.<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In our case, we'll call our stream <strong>Interop - GH/Revit - Project Data</strong></p></div></li> <li>Press the blue button at the center that reads <code>0 object</code> and select the option <code>Set/Edit Objects Filter</code>.</li> <li>Go to the <code>Project Info</code> filter type, select the <em>Project Info</em>, <em>Levels</em> and <em>Families and Types</em> options and press <code>Set Filter</code>.</li> <li>Press the <code>Send</code> button in the <em>Project Data</em> stream.</li></ul> <p><img src="/assets/img/ghRvt-sendProjectData.0174d413.gif" alt=""></p> <p>That's it! We've effectively pushed our project information, including all existing levels and loaded families/types to Speckle. We'll use this information to correctly set family/type names for Revit elements.</p> <p>This concludes our setup. We'll now switch to Grasshopper to receive it and use it to generate new Revit elements.</p> <h2 id="using-revit-project-data"><a href="#using-revit-project-data" class="header-anchor">#</a> Using Revit project data</h2> <p>Now let's open up our <em>fake Leadenhall</em> building model in Rhino. You'll need to open both Rhino and Grasshopper files, as there are some grasshopper nodes that reference geometries from the Rhino file.</p> <p>Go to a blank area of your Grasshopper canvas:</p> <ol><li>Create a <code>Panel</code> and a <code>Receive</code> node.</li> <li>Paste the <em>stream url</em> we copied in the previous step into the panel.</li> <li>Connect the panel to the <code>Receive</code> node input and press the <em>Receive</em> button.</li> <li>Create an <code>Expand Speckle Object</code> node, and connect the receied data to it.</li></ol> <p>Once done, it should look like this:</p> <p><img src="/assets/img/ghRvt-receiveRvtData.292159b1.png" alt=""></p> <p>Most of the outputs will also be <code>Base</code> objects, meaning you'll have to expand them to inspect their properties (more on this later when using family types).</p> <h2 id="sending-geometry-to-revit"><a href="#sending-geometry-to-revit" class="header-anchor">#</a> Sending geometry to Revit</h2> <p><img src="/assets/img/InteropGuide-plotData.2c703569.png" alt=""></p> <p>We'll start by sending in the surrounding buildings of our model, as well as the plot street lines and the plot terrain. For this, we'll first create a <code>Speckle Object</code> to organize our data.</p> <p><img src="/assets/img/ghRvt-plot-geometry.75f72684.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Remember you must correctly specify the <code>Access Type</code> for each input to generate the right amount of <code>Base</code> objects.</p> <p>Inputs set with <code>List Access</code> will be shown with an <code>L</code> icon beside them.</p></div> <p>We'll also need to create a new <em>stream</em> in our server, called <code>Interop - GH/Revit - Plot Data</code>, and copy it's <code>url</code>.</p> <p>Then, we can just plug in the geometries directly into their respective inputs. Connect it to a <code>Send</code> node pointing to the stream we just created and press <code>Send</code>.</p> <p><img src="/assets/img/gh-Rvt-sendPlotData.802d0700.png" alt=""></p> <p>In Revit, add the stream to your DesktopUI and press <code>Receive</code>. Here's a quick peek of the process:</p> <p><img src="/assets/img/gh-Rvt-anim-plot.4fd2bb57.gif" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">About sending BREPs</p> <p>Rhino BREP support still has some limitations we are working on improving, but other's are strictly imposed by the Revit API. In order to ensure unsupported geometric objects still get represented when importing to Revit, we provide a <code>fallback</code> value for every <code>BREP</code> in the form of a <code>Mesh</code>.</p> <p>So, whenever a BREP conversion fails in Revit, the resulting object will still be generated in the model, only as a tesselated representation of the smooth BREP.</p></div> <h3 id="controlling-the-directshape-conversion"><a href="#controlling-the-directshape-conversion" class="header-anchor">#</a> Controlling the DirectShape conversion</h3> <p>As you may have noticed, our surrounding buildings have been created in Revit as <code>Generic Models</code>. This is the default conversion behaviour when sending geometry elements that are not directly supported by Revit (such as meshes or breps).</p> <p>In order to control this behaviour, we can use the <code>Schema Builder</code> node.</p> <div class="custom-block tip"><p class="custom-block-title">SchemaBuilder node pop-up</p> <p>When first create the node, a pop-up window will appear allowing you to select the object type you want to create. These are organized into two main categories:</p> <ul><li>Built elements: These are Speckle elements created to support common built elements (beam, wall, slab, level...) accross the entire Speckle ecosystem.</li> <li>Revit elements: These are specifically designed to support Revit specific entities and workflows.
<img src="/assets/img/rvt-schemaBuilder-popup.05a0e125.gif" alt=""></li></ul></div> <ul><li>Drag a <code>Create Schema Object</code> node to your canvas.</li> <li>From the pop-up, select <code>DirectShape</code> and press ok. A new node and a dropdown should appear.</li> <li>Select <code>Mass</code> from the dropdown list.</li> <li>Connect the surrounding building geometries to the <code>baseGeometries</code> input. <em>Graft</em> the input to generate one direct shape per geometry.</li> <li>You'll also need to connect a panel with a desired name for each <code>DirectShape</code>.</li></ul> <p>Let's also send the <code>terrain</code> as a native <code>RevitTopography</code> object.</p> <ul><li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>RevitTopography</code> type.</li> <li>Connect the terrain mesh to the revit topography <code>displayMesh</code> input.</li></ul> <p>It should end up looking like this:</p> <p><img src="/assets/img/ghRvt-plot-revitObjects.367dc235.png" alt=""></p> <p>Now swap those direct shapes for the original geometries and send them.</p> <p>In Revit, once you get the notification that data was changed, press the receive button. You should now see the surrounding buildings appear as <code>Massing</code> objects.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you don't see the surrounding buildings, ensure you have the Massing objects visibility active in the <em>Massing / Site</em> tab in Revit.</p></div> <p><img src="/assets/img/gh-Rvt-anim-plotRvt.31a993e0.gif" alt=""></p> <h2 id="generating-floors-and-levels"><a href="#generating-floors-and-levels" class="header-anchor">#</a> Generating Floors and Levels</h2> <p>Now that we have our plot and surrounding buildings set-up, let's proceed with the creation of the levels and floor slabs for each level.</p> <p><img src="/assets/img/InteropGuide_floors.d6a52b40.png" alt=""></p> <h3 id="creating-levels"><a href="#creating-levels" class="header-anchor">#</a> Creating levels</h3> <ul><li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>RevitLevel</code> type.</li> <li>A revit level requires a <em>name</em>, <em>elevation</em>, and an indication to create a view for that level.</li> <li>Connect the <code>lower floor names</code> and <code>lower floor heights</code> to their respective inputs in the <code>RevitLevel</code> node.</li></ul> <p><img src="/assets/img/ghRvt-createLevels.1e482f8f.png" alt=""></p> <h3 id="creating-floors"><a href="#creating-floors" class="header-anchor">#</a> Creating floors</h3> <p>Now we'll create some native Revit floors, using the levels we previously created and the curves available on the <code>Upper/Lower Floor Outlines</code> nodes. We'll also need to select a floor type from one of the <code>available floor types</code> we received from Revit.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>To select a specific floor type, first select an individual type with a <code>list item</code> node, and then use the <code>Expand Speckle Object</code> node to inspect it's properties.</p></div> <ol><li>Create two <code>SchemaBuilder</code> nodes with <code>RevitFloor</code> type.</li> <li>Connect the selected family name and type.</li> <li>Connect the respective levels and outlines (upper/lower) to each <code>RevitFloor</code> node.</li></ol> <p><img src="/assets/img/ghRvt-createFloors.4e6e481f.png" alt=""></p> <h2 id="creating-beams"><a href="#creating-beams" class="header-anchor">#</a> Creating beams</h2> <p><img src="/assets/img/InteropGuide-beams.12dbd078.png" alt=""></p> <p>In this case, since we do not have much information about the structural beams, as they are modelled as simple lines. This is the perfect scenario to use Speckle's <code>BuiltElements</code>.</p> <p>These are simple representations of common BIM elements, that require a minimum amount of input. These elements will be appropriately converted to native elements on each target platform when possible.</p> <p>In the case of a <code>BuiltElements.Beam</code>, the input required is only the axis line of that beam.</p> <ol><li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>Beam</code> type (not <code>RevitBeam</code>).</li> <li>Connect all truss lines to the <code>baseLine</code> input. Since we don't really care about the data structure they're organized by, we can flatten the input.</li></ol> <p><img src="https://link" alt=""></p> <h2 id="creating-the-walls"><a href="#creating-the-walls" class="header-anchor">#</a> Creating the walls</h2> <p><img src="/assets/img/InteropGuide-walls.c40f96f6.png" alt=""></p> <h3 id="core-walls"><a href="#core-walls" class="header-anchor">#</a> Core walls</h3> <p>Just like with floors, we can create walls using the <code>Create Schema Object</code> node. There are several ways to create a wall, but for the <code>Core Walls</code>, we're going to create them with the <code>Wall by Face</code> type. This takes a surface as a reference to create a wall in revit with the same shape.</p> <ol><li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>Wall by Face</code> type.</li> <li>Locate the node called <code>Core Walls</code> and connect it to the <code>surface</code> input.</li> <li>Select a category from the <em>available wall types</em> we received from Revit and connect it's family name and type.</li> <li>The last thing we need is a level, but in this case, we already know there is a level called <code>Level 0</code> on our project, which is at ground level. We can reference it using the <code>Level by name</code> schema.</li> <li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>Level by name</code>.</li> <li>Connect a panel with the text &quot;Level 0&quot; to it's only input, and connect the resulting level into the <code>Wall by Face</code> node.</li></ol> <p><img src="/assets/img/ghRvt-createRevitWallsByFace.64f0ed0d.png" alt=""></p> <h3 id="interior-walls"><a href="#interior-walls" class="header-anchor">#</a> Interior walls</h3> <p>We have a bunch of interior walls we haven't done anything with yet. Lets create them using a <code>line</code> and a <code>height</code>.</p> <ul><li><p>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>Wall by curve and height</code> type.</p></li> <li><p>Connect the nodes <code>Wall Baseline per level</code>and <code>Wall Height per level</code> to the <code>baseLine</code> and <code>height</code> input respectively.</p></li> <li><p>Connect the <code>filtered levels</code> node to the <code>level</code> input.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Notice that, since not all levels have walls, the level's have been filtered to contain only the ones that are to be used.</p></div></li> <li><p>You can <em>flatten</em> the output of the node, as we won't be needing that data tree structure anymore.</p></li></ul> <p><img src="/assets/img/ghRvt-createRevitWalls.64fc2722.png" alt=""></p> <h2 id="categorizing-generic-geometric-objects"><a href="#categorizing-generic-geometric-objects" class="header-anchor">#</a> Categorizing generic geometric objects</h2> <p>For anything that cannot be directly translated into Revit elements, you can still send them directly, as we saw in the first step. Just as we did with the <em>surrounding buildings</em>, we can categorize the <em>Ground Floor Objects</em>, <em>Foundation</em> and <em>Ramps</em> as <code>DirectShape</code> objects with their appropriate categories.</p> <p><img src="/assets/img/ghRvt-genericObj-directShape.4bb203ee.png" alt=""></p> <h2 id="organize-the-building-structure"><a href="#organize-the-building-structure" class="header-anchor">#</a> Organize the building structure</h2> <p>Until this moment, we've been creating several Revit elements we want to send. Before doing so, let's organize that data into a single <code>Speckle Object</code> to keep everything tidy.</p> <p>We have several parts to send:</p> <ul><li>Floors</li> <li>Core walls</li> <li>Interior walls</li> <li>Beams</li> <li>Objects at ground floor</li> <li>Substructure</li> <li>Ramps</li></ul> <ol><li>Drag a new <code>Create Speckle Object</code> node.</li> <li>Create inputs for each of the object types we just created.</li> <li>Connect everything appropriately.</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Always remember to set the access type of your inputs appropriately.</p></div> <p><img src="/assets/img/ghRvt-structureData.b38e35f4.png" alt=""></p> <h2 id="sending-the-building-structure"><a href="#sending-the-building-structure" class="header-anchor">#</a> Sending the building structure</h2> <p>On the server's website, create a new stream to send the structure data to. Copy it's <code>url</code>. In Grasshopper, create a <code>Send</code> node and a panel with the <code>url</code> of the stream we created earlier to share the structure.</p> <p><img src="/assets/img/gh-Rvt-sendStructureData.31a6e354.png" alt=""></p> <p>In Revit, add the newly created stream to the DesktopUI and press <code>Receive</code>. You can see the entire process in the animation bellow.</p> <p><img src="/assets/img/gh-Rvt-anim-structureData.d66c5a3f.gif" alt=""></p> <h2 id="create-adaptivefamiliy-instances"><a href="#create-adaptivefamiliy-instances" class="header-anchor">#</a> Create AdaptiveFamiliy instances</h2> <p><img src="/assets/img/InteropGuide-panels.c1293242.png" alt=""></p> <p>Adaptative families in Revit are a cool contraption. You can provide a set of points and they will adapt to the given positions.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In order to correctly create <em>Adaptive Family</em> instances, the specified family must be loaded into the Revit project.</p> <p>The amount of points provided must also coincide with the amount of points the <em>Adaptive Family</em> uses internally.</p></div> <p>You'll find a very simple adaptive component called <code>4Pt-AdaptivePanel</code> along with the rest of the files of this guide.</p> <p>In the file, we already created some <em>curved square panels</em> to act as a fancy roof shading. In the grasshopper file, you'll find a node called <code>Point groups for adaptive component</code>, containing the 4 corners of this panels individually grouped.</p> <p>Sending <em>Adaptive Components</em> to Revit using Speckle is quite easy:</p> <ul><li>Drag a <code>Create Schema Object</code> node to your canvas and select the <code>AdaptiveComponent</code> type.</li> <li>Input the appropriate <code>family</code> and <code>type</code> (in our case, they are both the same: <code>4Pt-AdaptivePanel</code>)</li> <li>Connect the grouped points to the <code>basePoints</code> input. The component would generate an <code>AdaptiveComponent</code> object for every group of points.</li> <li>Create a new stream on the server to hold this adaptive panels and create a <code>Send</code> node pointing to that stream.</li> <li>Send the <code>AdaptiveComponents</code> you just created.</li></ul> <p><img src="/assets/img/ghRvt-creatingAdaptiveComponents.b51fe833.png" alt=""></p> <p>In Revit, add the stream you just created using the Desktop UI and receive the data. Your panels should appear on the top floor of the building.</p> <p><img src="/assets/img/gh-Rvt-anim-panels.fc45add6.gif" alt=""></p> <h3 id="using-branches-to-swap-design-alternatives"><a href="#using-branches-to-swap-design-alternatives" class="header-anchor">#</a> Using branches to swap design alternatives</h3> <p>This is a perfect moment to introduce the behaviour of <code>branches</code> in the Speckle Revit connector; and how you can leverage the feature to alternate between different design options.</p> <ol><li>Go to the stream's url in your web browser, and create a new branch called <code>design-option-2</code>.</li> <li>Copy the url of the <code>branch</code> page (it should end in <code>/branches/BRANCH_NAME</code>)</li> <li>On the grasshopper file, modify the points in any way, like modifying the <code>seed</code> input in the <code>Random numbers</code> node.</li> <li>Change the <code>stream url</code> for the <code>branch url</code> we just copied and press send.</li></ol> <p>In Revit, you'll notice there's an update notification in the <em>Roof Panels</em> stream that specifies there have been changes in a <strong>different branch</strong>. You need to switch branches to receive the new data.</p> <ol><li>Click on the branch name on the Stream card.</li> <li>Select the branch we just created.</li> <li>Click the <code>Receive</code> button.</li></ol> <p>You should see the new panels update to reflect the new design option. To go back to the previous version, you can always go back to the <code>main</code> branch.</p> <p><img src="/assets/img/ghRvt-swapBranches.9c146ba3.gif" alt=""></p> <h2 id="using-speckle-in-the-family-editor"><a href="#using-speckle-in-the-family-editor" class="header-anchor">#</a> Using Speckle in the Family Editor</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>üöß This section is still under construction üöß</p></div> <h3 id="populating-family-instances-in-the-model"><a href="#populating-family-instances-in-the-model" class="header-anchor">#</a> Populating family instances in the model</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>üöß This section is still under construction üöß</p></div> <h2 id="known-issues"><a href="#known-issues" class="header-anchor">#</a> Known issues</h2> <p>Speckle 2.0 is currently under <code>beta</code>. You can find any known issues on our <a href="https://github.com/specklesystems/speckle-sharp/issues?q=is%3Aissue+is%3Aopen" target="_blank" rel="noopener noreferrer">GitHub Repo Issues page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/specklesystems/speckle-docs/edit/main/user/interop-gh-revit.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/24/2021, 12:04:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/user/tutorials.html" class="prev">
        Introduction
      </a></span> <span class="next"><a href="/user/interop-revit-gh.html">
        Revit to Grasshopper and back
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a90ae7ec.js" defer></script><script src="/assets/js/2.30e32a96.js" defer></script><script src="/assets/js/5.bb6a9546.js" defer></script>
  </body>
</html>
