<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Revit to Grasshopper and back | Speckle Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="/scripts/scroll-to-hash.js"></script>
    <meta name="description" content="Documentation on everything Speckle">
    <meta name="theme-color" content="#0480FB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c47c1881.css" as="style"><link rel="preload" href="/assets/js/app.a90ae7ec.js" as="script"><link rel="preload" href="/assets/js/2.30e32a96.js" as="script"><link rel="preload" href="/assets/js/7.1dab787c.js" as="script"><link rel="prefetch" href="/assets/js/10.fae5e6d1.js"><link rel="prefetch" href="/assets/js/11.996eea02.js"><link rel="prefetch" href="/assets/js/12.0a5fd7ae.js"><link rel="prefetch" href="/assets/js/13.dddba295.js"><link rel="prefetch" href="/assets/js/14.fab3861f.js"><link rel="prefetch" href="/assets/js/15.4ee5f480.js"><link rel="prefetch" href="/assets/js/16.8fd9a0ef.js"><link rel="prefetch" href="/assets/js/17.3dad7cf7.js"><link rel="prefetch" href="/assets/js/18.7afdb510.js"><link rel="prefetch" href="/assets/js/19.6251e448.js"><link rel="prefetch" href="/assets/js/20.71fb7abb.js"><link rel="prefetch" href="/assets/js/21.df477c4a.js"><link rel="prefetch" href="/assets/js/22.62c70760.js"><link rel="prefetch" href="/assets/js/23.0d6de2f6.js"><link rel="prefetch" href="/assets/js/24.165711aa.js"><link rel="prefetch" href="/assets/js/25.f2834aad.js"><link rel="prefetch" href="/assets/js/26.868f3e17.js"><link rel="prefetch" href="/assets/js/27.1ed49925.js"><link rel="prefetch" href="/assets/js/28.ac560d0d.js"><link rel="prefetch" href="/assets/js/29.0e2b9712.js"><link rel="prefetch" href="/assets/js/3.38209935.js"><link rel="prefetch" href="/assets/js/30.f4ada542.js"><link rel="prefetch" href="/assets/js/31.546af2eb.js"><link rel="prefetch" href="/assets/js/32.a521f6ab.js"><link rel="prefetch" href="/assets/js/33.78efc442.js"><link rel="prefetch" href="/assets/js/34.2999d2c2.js"><link rel="prefetch" href="/assets/js/35.1543f154.js"><link rel="prefetch" href="/assets/js/36.e44add84.js"><link rel="prefetch" href="/assets/js/37.79c8f986.js"><link rel="prefetch" href="/assets/js/38.d3feed7d.js"><link rel="prefetch" href="/assets/js/39.fadaf6da.js"><link rel="prefetch" href="/assets/js/4.34836e0f.js"><link rel="prefetch" href="/assets/js/40.c6f726d1.js"><link rel="prefetch" href="/assets/js/41.a3895286.js"><link rel="prefetch" href="/assets/js/42.876b8808.js"><link rel="prefetch" href="/assets/js/43.89be6dde.js"><link rel="prefetch" href="/assets/js/44.fe4b06f4.js"><link rel="prefetch" href="/assets/js/45.590dbf01.js"><link rel="prefetch" href="/assets/js/46.bba68b22.js"><link rel="prefetch" href="/assets/js/47.ff48fd0b.js"><link rel="prefetch" href="/assets/js/48.b4202064.js"><link rel="prefetch" href="/assets/js/49.083ceacf.js"><link rel="prefetch" href="/assets/js/5.bb6a9546.js"><link rel="prefetch" href="/assets/js/50.f03dcd13.js"><link rel="prefetch" href="/assets/js/51.b3c49844.js"><link rel="prefetch" href="/assets/js/52.7e5e7d26.js"><link rel="prefetch" href="/assets/js/53.d21b8a35.js"><link rel="prefetch" href="/assets/js/54.698a3867.js"><link rel="prefetch" href="/assets/js/55.e59ae049.js"><link rel="prefetch" href="/assets/js/56.3a948b0d.js"><link rel="prefetch" href="/assets/js/57.25026e30.js"><link rel="prefetch" href="/assets/js/58.8007a9b6.js"><link rel="prefetch" href="/assets/js/59.c90e55f1.js"><link rel="prefetch" href="/assets/js/6.a6ea64af.js"><link rel="prefetch" href="/assets/js/8.f554cd35.js"><link rel="prefetch" href="/assets/js/9.6d1fd3fd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c47c1881.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo-docs.png" alt="Speckle Docs" class="logo"> <span class="site-name can-hide">Speckle Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join the beta
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join the beta
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quickstart 🏃‍♀️</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/quickstart.html" class="sidebar-link">Zero to Speckle ASAP</a></li><li><a href="/user/FAQs.html" class="sidebar-link">FAQs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Guide 🤷</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Welcome!</a></li><li><a href="/user/concepts.html" class="sidebar-link">Core Concepts</a></li><li><a href="/user/concepts-advanced.html" class="sidebar-link">Advanced Concepts</a></li><li><a href="/user/manager.html" class="sidebar-link">Speckle Manager</a></li><li><a href="/user/web.html" class="sidebar-link">Speckle Web App</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Connectors 🔌</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/connectors.html" class="sidebar-link">Introduction</a></li><li><a href="/user/ui.html" class="sidebar-link">User Interface</a></li><li><a href="/user/revit.html" class="sidebar-link">Revit</a></li><li><a href="/user/rhino.html" class="sidebar-link">Rhino</a></li><li><a href="/user/autocadcivil.html" class="sidebar-link">AutoCAD &amp; Civil 3D</a></li><li><a href="/user/grasshopper.html" class="sidebar-link">Grasshopper</a></li><li><a href="/user/dynamo.html" class="sidebar-link">Dynamo</a></li><li><a href="/user/unity.html" class="sidebar-link">Unity</a></li><li><a href="/user/unreal.html" class="sidebar-link">Unreal</a></li><li><a href="/user/blender.html" class="sidebar-link">Blender</a></li><li><a href="/user/excel.html" class="sidebar-link">Excel</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorials ⚡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/user/tutorials.html" class="sidebar-link">Introduction</a></li><li><a href="/user/interop-gh-revit.html" class="sidebar-link">Grasshopper ➡ Revit</a></li><li><a href="/user/interop-revit-gh.html" aria-current="page" class="active sidebar-link">Revit to Grasshopper and back</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#sharing-project-data" class="sidebar-link">Sharing project data</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#sharing-revit-elements" class="sidebar-link">Sharing Revit elements</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#receiving-revit-elements-in-grasshopper" class="sidebar-link">Receiving Revit elements in Grasshopper</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#displaying-existing-levels" class="sidebar-link">Displaying existing levels</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#displaying-revit-elements-in-grasshopper" class="sidebar-link">Displaying revit elements in Grasshopper</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#visualizing-revit-elements" class="sidebar-link">Visualizing revit elements</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#color-by-category" class="sidebar-link">Color by category</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#color-by-level" class="sidebar-link">Color by level</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#color-by-parameter-value" class="sidebar-link">Color by parameter value</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#updating-revit-parameter-values-from-gh" class="sidebar-link">Updating Revit parameter values from GH</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#sending-update-orders-from-gh" class="sidebar-link">Sending update orders from GH</a></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#receiving-the-updates-in-revit" class="sidebar-link">Receiving the updates in Revit</a></li></ul></li><li class="sidebar-sub-header"><a href="/user/interop-revit-gh.html#known-issues" class="sidebar-link">Known issues</a></li></ul></li><li><a href="/user/interop-rhino-revit.html" class="sidebar-link">Rhino ➡ Revit</a></li><li><a href="/user/tutorial-autocad-rhinogh.html" class="sidebar-link">Quality control AutoCAD drawings in Grasshopper</a></li><li><a href="/user/tutorial-unity-revit-rhino-experiences.html" class="sidebar-link">Create interactive real time experiences with Unity, Revit and Rhino</a></li><li><a href="/user/tutorial-collab-rh-gh.html" class="sidebar-link">Collaborative Data Informed Design Workflows With Rhino and Grasshopper</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="revit-to-grasshopper-and-back"><a href="#revit-to-grasshopper-and-back" class="header-anchor">#</a> Revit to Grasshopper and back</h1> <blockquote><p><strong>Level:</strong> advanced</p> <p><strong>Author:</strong> Alan</p> <p><strong>Software used:</strong> Revit 2021, Grasshopper for Rhino 7</p></blockquote> <p>You can stream <em>Revit</em> native elements to <em>Grasshopper</em> using Speckle! In this guide, we will send different types of Revit elements, such as walls, floors, levels, etc. We will also learn how to specify which data will be sent by using <em>filters</em>, extract parameter values, use them to drive our Grasshopper definitions and how to update parameter values back in the Revit model.</p> <p><img src="/assets/img/rvt-gh-intro-img.cb242106.png" alt=""></p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h2> <p>Before getting started, check that you have a supported version of Rhino (6 or 7) and Revit (2019-21) and the Speckle 2.0 connectors installed for <strong>Grasshopper</strong> and <strong>Revit</strong>. Then download the Revit and Grasshopper files for this tutorial <a href="https://drive.google.com/drive/folders/19JNfCRJcPaO4QBo2q0swwjNLZ1nOnMMS?usp=sharing" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Our Rhino and Grasshopper connectors are independent of each other, unlike in Speckle 1.0. This means you can choose which one is appropriate for you, or install both! 😁</p></div> <h2 id="sharing-project-data"><a href="#sharing-project-data" class="header-anchor">#</a> Sharing project data</h2> <p>In many cases, we may want to share some basic project data, such as it's views, existing levels or loaded families. These types of elements are not really selectable in Revit, but we can use one of the <em>filters</em> to select them.</p> <ol><li>Create a new stream called <code>Interop - Revit/GH v2 - Project Data</code>.</li> <li>Select the <code>Project Information</code> filter</li> <li>Choose the <strong>Project Info</strong>, <strong>Levels</strong> and <strong>Families &amp; Types</strong> options and press <code>Set Filter</code>.
You should see the filter selection appear in the <em>Stream card</em>.</li> <li>Press <code>Send</code>.</li></ol> <p><img src="/assets/img/rvtGh-sendingProjectData.90ee04c6.gif" alt=""></p> <h2 id="sharing-revit-elements"><a href="#sharing-revit-elements" class="header-anchor">#</a> Sharing Revit elements</h2> <p>Now that everyone can access the project data, let's create a new stream to send a selection of the buidling elements.</p> <p>In this case, we'll be sending the <strong>Walls</strong>, <strong>Floors</strong> and <strong>Structural Framing</strong>, to be later used in Grasshopper.</p> <p><img src="/assets/img/rvtGH-sendingBuildingElements.24a2aa0e.gif" alt=""></p> <ol><li>Create a new stream called <code>Interop - Revit/GH v2 - Building</code>.</li> <li>Select the <code>Category</code> filter</li> <li>Choose the <strong>Walls</strong>, <strong>Floors</strong> and <strong>Structural Framing</strong> options and press <code>Set Filter</code>.
You should see the filter selection appear in the <em>Stream card</em>.</li> <li>Press <code>Send</code>.</li></ol> <h2 id="receiving-revit-elements-in-grasshopper"><a href="#receiving-revit-elements-in-grasshopper" class="header-anchor">#</a> Receiving Revit elements in Grasshopper</h2> <p>Now that we have both our <em>Project Data</em> and some <em>Building Elements</em> in the Speckle server. Let's switch to Grasshopper and use those elements to do some simple Grasshopper tasks.</p> <h2 id="displaying-existing-levels"><a href="#displaying-existing-levels" class="header-anchor">#</a> Displaying existing levels</h2> <p>Included in the <em>Project Data</em> we have the levels available in our building. Lets create some planes at each elevation, and use those to display the name of each floor.</p> <p><img src="/assets/img/rvtGh-createLevelTextTag.144539e9.png" alt=""></p> <ol><li><p>Create a <code>Receive</code> node and a panel with the <code>Interop - Revit/GH v2 - Project Data</code> <strong>stream url</strong>.</p></li> <li><p>Connect the panel to the only input in the <code>Receive</code> node.</p></li> <li><p>Press the <code>Receive</code> button inside the node and wait for the process to finish.</p> <div class="custom-block tip"><p class="custom-block-title">Base objects</p> <p>You'll notice that the data you received is a <code>Base</code> object. In order to see what's <em>inside</em> that speckle object, we need to <strong>expand it</strong>.</p> <p>We'll use the 'Expand Speckle Object` node extensively in this guide.</p></div></li> <li><p>Create an <code>ExpandSpeckleObject</code> component and plug the <code>Base</code> object into it's input.</p></li> <li><p>The node outputs will display the different properties available on that object. There will be a <code>@levels</code> output.</p></li> <li><p>Create another <code>ExpandSpeckleObject</code> to the <code>@levels</code> output.</p></li> <li><p>The node will display the properties available for each level in the building, including its <strong>name</strong> and <strong>elevation</strong>.</p></li> <li><p>Create a vector using the <code>elevation</code> value, and plug that into an <code>XY Plane</code> node.</p></li> <li><p>Create a <code>Text Tag</code> and plug our newly created planes and our <code>level</code> names.</p></li></ol> <p>If everything went well, you should see on your screen the generated planes and text tags with the level names on each chposition.</p> <p><img src="/assets/img/rvtGh-generateLevelTagsRhino.bf3ea467.png" alt=""></p> <h2 id="displaying-revit-elements-in-grasshopper"><a href="#displaying-revit-elements-in-grasshopper" class="header-anchor">#</a> Displaying revit elements in Grasshopper</h2> <p>Let's also receive the Revit elements we sent to the <code>Interop - Revit/GH - Building</code> stream.</p> <p><img src="/assets/img/rvtGh-receiveRevitElements.6fc23ff1.png" alt=""></p> <ol><li><p>Create a <code>Receive</code> node and a panel with the <code>Interop - Revit/GH v2 - Building</code> <strong>stream url</strong>.</p></li> <li><p>Connect the panel to the only input in the <code>Receive</code> node.</p></li> <li><p>Press the <code>Receive</code> button inside the node and wait for the process to finish.</p></li> <li><p>Create an <code>ExpandSpeckleObject</code> component and plug the <code>Base</code> object into it's input.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You'll see that every category we selected on the Revit filter is organized in different outputs:+</p> <div class="language- extra-class"><pre><code> Floors - Structural Framing - Walls
</code></pre></div></div></li></ol> <h3 id="visualizing-revit-elements"><a href="#visualizing-revit-elements" class="header-anchor">#</a> Visualizing revit elements</h3> <p>Every Revit element will always have a <code>displayMesh</code> property containing the geometric representation of that object.</p> <p>In order to access it, we can use the <code>Speckle Object Value by Key</code> node to just fetch the mesh from the elements we received. The ouptut can then be previewed in the Rhino window.</p> <p><img src="/assets/img/rvtGh-displayMeshValue.ea2672f7.png" alt=""></p> <p>We can now proceed to extract some parameters from each object and use them to color our elements accordingly.</p> <h3 id="color-by-category"><a href="#color-by-category" class="header-anchor">#</a> Color by category</h3> <p>Coloring by category is the most straighforward. Using the data tree we generated with our elements:</p> <p><img src="/assets/img/rvtGh-colorByCategory.c71371d5.png" alt=""></p> <ol><li>Extract the <code>displayMesh</code> value from each element</li> <li>Generate one color for each of the branches in our <code>data tree</code></li> <li>Connect the meshes and colors into a <code>Custom Preview</code> node.</li></ol> <p><img src="/assets/img/rvtGh-colorElementsByCategoryRhino.17d5bd90.png" alt=""></p> <h3 id="color-by-level"><a href="#color-by-level" class="header-anchor">#</a> Color by level</h3> <p>Coloring by level requires also extracting the assigned level for each element. We can do it just like we did for the <code>displayMesh</code></p> <p><img src="/assets/img/rvtGh-ColorByLevel.0a8f1900.png" alt=""></p> <ol><li>Use a <code>Speckle Object Value by Key</code> to get the <code>displayMesh</code> and <code>level</code> of each object.</li> <li>Use an <code>ExpandSpeckleObject</code> node to obtain the <code>name</code> and <code>elevation</code> of the floor assigned to each element.</li> <li>Using some <em>grasshopper magic</em>, create one color per elevation value (we are using a gradient for this).</li> <li>Connect the meshes and colors into a <code>Custom Preview</code> node.</li></ol> <p><img src="/assets/img/rvtGh-colorElementsByLevelRhino.95eed001.png" alt=""></p> <h3 id="color-by-parameter-value"><a href="#color-by-parameter-value" class="header-anchor">#</a> Color by parameter value</h3> <p>Coloring by parameter requires a little bit more Grasshopper knowledge. As you'd have to handle the parameter list on your own.</p> <p><img src="/assets/img/rvtGh-ColorByParameter.e49655a0.png" alt=""></p> <ol><li>Use an <code>Expand Speckle Object</code> component to retrieve <strong>all</strong> the properties from the elements. We're interested in the <code>displayMesh</code> and the <code>parameters</code> list.</li> <li>Use another <code>Expand Speckle Object</code> component to retrieve the properties of each parameter.</li> <li>To simplify our work, create a set out of all the parameter names.</li> <li>Now you can use that set to select a specific parameter value (in our case the <strong>volume</strong>, index 9) and use those values to drive our gradient.</li></ol> <p>You should see the colored elements in the Rhino viewport (in the screenshot, green is smaller and red is bigger).</p> <p><img src="/assets/img/rvtGH-colorElementsByTypeRhino.0732e1a4.png" alt=""></p> <h2 id="updating-revit-parameter-values-from-gh"><a href="#updating-revit-parameter-values-from-gh" class="header-anchor">#</a> Updating Revit parameter values from GH</h2> <p>Now, receiving revit elements and playing with their values in Grasshopper is only part of the story. You may eventually need to send some extra information back to the original Revit model (labelling elements, modifying family types or any other parameter change).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You can send parameter updates to Revit using the <code>ParameterUpdater</code> schema. For that, you'll need to:</p> <ol><li>Create a new <code>Create Schema Object</code> node, and select from the <em>pop-up</em> the <code>ParameterUpdater</code> option.</li> <li>Repeat the same step, but select the <code>Paramter</code> option from the <em>pop-up</em>.</li></ol> <p>The process is quite simple, you first need to <em>create a parameter</em> with a <code>name</code> and a <code>value</code>. Then, in the <code>ParameterUpdater</code> you specify the <code>elementId</code> of the element you want to modify, and the parameter object we just created.</p> <p>In order to be able to update a parameter value, the parameter <em><strong>must exist</strong></em> in the element.</p></div> <h3 id="sending-update-orders-from-gh"><a href="#sending-update-orders-from-gh" class="header-anchor">#</a> Sending update orders from GH</h3> <p>Let's use this to update the <code>Mark</code> parameter (which exists in all Revit elements) of all walls in our model.</p> <p>We're just going to name each wall sequentially with the pattern <code>WALL1, WALL2...WALLXX</code>, so each wall will have a unique <code>mark</code>.</p> <p><img src="/assets/img/rvtGh-updateParameters.d4f6b49a.png" alt=""></p> <ol><li>Connect the walls to an <code>Expand Speckle Object</code> node.</li> <li>Using the <code>elementId</code> create a list of numbers of the same length and concatenate it with the text <code>WALL</code>.</li> <li>Connect the list to the <code>Parameter</code> node, and connect a panel with the text <strong>Mark</strong> to the <code>name</code></li> <li>Connect the <code>elementId</code> and the <code>parameter</code> list appropriately in the <code>ParameterUpdater</code> node.</li></ol> <p>We will also need a new stream and <code>send node</code> to send this data to Revit. Create a new stream called <code>Interop - Revit/GH v2 - ParamUpdate</code> and send the <code>ParameterUpdater</code> elements.</p> <p><img src="/assets/img/rvtGh-sendParameterUpdater.8e30acad.gif" alt=""></p> <h3 id="receiving-the-updates-in-revit"><a href="#receiving-the-updates-in-revit" class="header-anchor">#</a> Receiving the updates in Revit</h3> <p>In Revit, add the stream we just created to your project and press <code>Receive</code>. Once the process has completed, you should see the <code>Mark</code> property has been filled with unique values for each wall. You can repeat this process as many times as necessary.</p> <p><img src="/assets/img/rvtGh-receiveParameterUpdates.6751f23e.gif" alt=""></p> <h2 id="known-issues"><a href="#known-issues" class="header-anchor">#</a> Known issues</h2> <ul><li><p>Under the <code>beta</code> release, there is limited support for Solid elements to be sent <em>from</em> Revit <em>to</em> Speckle. Any solid that is not supported will be converted to a <code>Mesh</code> instead.</p> <p>Speckle 2.0 is currently under <code>beta</code>. You can find any known issues on our <a href="https://github.com/specklesystems/speckle-sharp/issues?q=is%3Aissue+is%3Aopen" target="_blank" rel="noopener noreferrer">GitHub Repo Issues page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/specklesystems/speckle-docs/edit/main/user/interop-revit-gh.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/24/2021, 12:04:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/user/interop-gh-revit.html" class="prev">
        Grasshopper ➡ Revit
      </a></span> <span class="next"><a href="/user/interop-rhino-revit.html">
        Rhino ➡ Revit
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a90ae7ec.js" defer></script><script src="/assets/js/2.30e32a96.js" defer></script><script src="/assets/js/7.1dab787c.js" defer></script>
  </body>
</html>
